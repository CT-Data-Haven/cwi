<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Read crosstab data and weights — read_xtabs • cwi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read crosstab data and weights — read_xtabs"><meta name="description" content="These two functions facilitate reading in Excel
spreadsheets of crosstabs generated from SPSS. Note that they're likely
only useful for working with the DataHaven Community Wellbeing Survey."><meta property="og:description" content="These two functions facilitate reading in Excel
spreadsheets of crosstabs generated from SPSS. Note that they're likely
only useful for working with the DataHaven Community Wellbeing Survey."><meta property="og:image" content="https://CT-Data-Haven.github.io/cwi/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cwi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cwi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/acs-updates.html">ACS updates</a></li>
    <li><a class="dropdown-item" href="../articles/regions.html">Regions</a></li>
    <li><a class="dropdown-item" href="../articles/shapefiles.html">Shapefiles</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CT-Data-Haven/cwi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Read crosstab data and weights</h1>
      <small class="dont-index">Source: <a href="https://github.com/CT-Data-Haven/cwi/blob/main/R/read_dcws.R" class="external-link"><code>R/read_dcws.R</code></a></small>
      <div class="d-none name"><code>read_xtabs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These two functions facilitate reading in Excel
spreadsheets of crosstabs generated from SPSS. Note that they're likely
only useful for working with the DataHaven Community Wellbeing Survey.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_xtabs</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  name_prefix <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>  marker <span class="op">=</span> <span class="st">"Nature of the [Ss]ample"</span>,</span>
<span>  year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  process <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">read_weights</span><span class="op">(</span><span class="va">path</span>, <span class="va">year</span>, marker <span class="op">=</span> <span class="st">"Nature of the [Ss]ample"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Path to an excel file</p></dd>


<dt id="arg-name-prefix">name_prefix<a class="anchor" aria-label="anchor" href="#arg-name-prefix"></a></dt>
<dd><p>String used to create column names such as x1, x2, x3, ...,
Default: 'x'</p></dd>


<dt id="arg-marker">marker<a class="anchor" aria-label="anchor" href="#arg-marker"></a></dt>
<dd><p>String/regex pattern used to demarcate crosstabs from weight
table. If <code>NULL</code>, it will be assumed that the file contains only crosstab
data <em>or</em> weights, and no filtering will be done. If <code>marker</code> is never found,
it's assumed that weights are in headers above the data, such as for 2021,
in which case a different operation is done but the same weights table is
returned. Default: <code>"Nature of the [Ss]ample"</code></p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>Numeric: year of the survey (or end year, in the case of pooled data).
This tells the functions how to read the files, since formatting has changed
across years of the survey. Because the ability to read a file depends so much
on the year for which it was produced, this argument no longer defaults to a
specific year. Instead, if <code>NULL</code> (the default), it will be guessed from the
path. Supplying it explicitly is better, but this serves as a fallback.</p></dd>


<dt id="arg-process">process<a class="anchor" aria-label="anchor" href="#arg-process"></a></dt>
<dd><p>Logical: if <code>FALSE</code> (the default), this will return the
crosstab data to be processed, most likely by passing along to <code>xtab2df</code>. If
<code>TRUE</code>, <code>xtab2df</code> will be called, and you'll receive a nice, clean data frame
ready for analysis. This is <em>only</em> recommended if you already know for sure
what the crosstab data looks like, so you don't accidentally lose some
questions or important description. As a sanity check, you'll see a message
listing the parameters used in the <code>xtab2df</code> call.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical: if <code>process</code> is true, should parameters being passed to
<code>xtab2df</code> be printed? Defaults to <code>TRUE</code> to encourage you to double check that
you're passing arguments intentionally.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed on to <code>xtab2df</code> if <code>process = TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame. For <code>read_xtabs</code>, there will be one column per
demographic/geographic group included, plus one for the questions &amp; answers.
For <code>read_weights</code>, only 2 columns, one for demographic groups and one for
their associated weights.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="xtab2df.html">xtab2df()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">xt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/test_xtab2018.xlsx"</span>, package <span class="op">=</span> <span class="st">"cwi"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu">read_weights</span><span class="op">(</span><span class="va">xt</span>, year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>    <span class="co"># returns a not-very-pretty data frame of the crosstabs to be processed</span></span></span>
<span class="r-in"><span>    <span class="fu">read_xtabs</span><span class="op">(</span><span class="va">xt</span>, year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="co"># returns a pretty data frame ready for analysis</span></span></span>
<span class="r-in"><span>    <span class="fu">read_xtabs</span><span class="op">(</span><span class="va">xt</span>, year <span class="op">=</span> <span class="fl">2018</span>, process <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

