<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basic workflow • cwi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="cwi_files/libs/quarto-html/popper.min.js"></script><script src="cwi_files/libs/quarto-html/tippy.umd.min.js"></script><link href="cwi_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cwi_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic workflow">
<meta property="og:image" content="https://CT-Data-Haven.github.io/cwi/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cwi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.12.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/cwi.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/acs-updates.html">ACS updates</a></li>
    <li><a class="dropdown-item" href="../articles/regions.html">Regions</a></li>
    <li><a class="dropdown-item" href="../articles/shapefiles.html">Shapefiles</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CT-Data-Haven/cwi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Basic workflow</h1>




      <small class="dont-index">Source: <a href="https://github.com/CT-Data-Haven/cwi/blob/main/vignettes/cwi.qmd" class="external-link"><code>vignettes/cwi.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://camille-s.github.io/camiller" class="external-link">camiller</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CT-Data-Haven/cwi" class="external-link">cwi</a></span><span class="op">)</span></span></code></pre></div>
</div>
<p>The tables I’m working with are <code>B01003</code>, total population; <code>B03002</code>, race and Latino ethnicity; and <code>B25003</code>, housing tenure. It’s easiest to save these in a named list, then map over the list calling <code><a href="../reference/multi_geo_acs.html">multi_geo_acs()</a></code> for each table number.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yr</span> <span class="op">&lt;-</span> <span class="fl">2023</span></span>
<span><span class="va">table_nums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    total_pop <span class="op">=</span> <span class="st">"B01003"</span>,</span>
<span>    race <span class="op">=</span> <span class="st">"B03002"</span>,</span>
<span>    tenure <span class="op">=</span> <span class="st">"B25003"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<section class="section level2"><h2 id="fetching-data-from-acs">Fetching data from ACS<a class="anchor" aria-label="anchor" href="#fetching-data-from-acs"></a>
</h2>
<p>I’m pulling out the entries in the <code>cwi</code> dataset <code><a href="../reference/regions.html">cwi::regions</a></code> (a list) to only include the Greater New Haven-area ones. Then I fetch the ACS tables for those regions, their towns, and New Haven County.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gnh_regions</span> <span class="op">&lt;-</span> <span class="va">regions</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Greater New Haven"</span>, <span class="st">"New Haven Inner Ring"</span>, <span class="st">"New Haven Outer Ring"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">gnh_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">table_nums</span>, <span class="va">multi_geo_acs</span>,</span>
<span>    year <span class="op">=</span> <span class="va">yr</span>, towns <span class="op">=</span> <span class="va">regions</span><span class="op">$</span><span class="va">`Greater New Haven`</span>,</span>
<span>    regions <span class="op">=</span> <span class="va">gnh_regions</span>, state <span class="op">=</span> <span class="st">"09"</span>, sleep <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">gnh_data</span><span class="op">$</span><span class="va">total_pop</span></span>
<span><span class="co">#&gt; # A tibble: 26 × 9</span></span>
<span><span class="co">#&gt;     year level    state       county geoid name          variable estimate   moe</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  2023 1_state  &lt;NA&gt;        &lt;NA&gt;   09    Connecticut   B01003_…  3598348    NA</span></span>
<span><span class="co">#&gt;  2  2023 2_county Connecticut &lt;NA&gt;   09110 Capitol COG   B01003_…   969029    NA</span></span>
<span><span class="co">#&gt;  3  2023 2_county Connecticut &lt;NA&gt;   09120 Greater Brid… B01003_…   326296    NA</span></span>
<span><span class="co">#&gt;  4  2023 2_county Connecticut &lt;NA&gt;   09130 Lower Connec… B01003_…   174983    NA</span></span>
<span><span class="co">#&gt;  5  2023 2_county Connecticut &lt;NA&gt;   09140 Naugatuck Va… B01003_…   452303    NA</span></span>
<span><span class="co">#&gt;  6  2023 2_county Connecticut &lt;NA&gt;   09150 Northeastern… B01003_…    95829    NA</span></span>
<span><span class="co">#&gt;  7  2023 2_county Connecticut &lt;NA&gt;   09160 Northwest Hi… B01003_…   112848    NA</span></span>
<span><span class="co">#&gt;  8  2023 2_county Connecticut &lt;NA&gt;   09170 South Centra… B01003_…   566803    NA</span></span>
<span><span class="co">#&gt;  9  2023 2_county Connecticut &lt;NA&gt;   09180 Southeastern… B01003_…   279025    NA</span></span>
<span><span class="co">#&gt; 10  2023 2_county Connecticut &lt;NA&gt;   09190 Western Conn… B01003_…   621232    NA</span></span>
<span><span class="co">#&gt; # ℹ 16 more rows</span></span></code></pre></div>
</div>
<p>Neighborhoods with corresponding tracts or block groups are included for 4 cities (see <code>neighborhood_tracts</code>). Pass those to get neighborhood-level aggregates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/multi_geo_acs.html">multi_geo_acs</a></span><span class="op">(</span><span class="st">"B01003"</span>,</span>
<span>    towns <span class="op">=</span> <span class="st">"New Haven"</span>,</span>
<span>    neighborhoods <span class="op">=</span> <span class="va">new_haven_tracts</span>,</span>
<span>    nhood_geoid <span class="op">=</span> <span class="st">"geoid"</span>,</span>
<span>    year <span class="op">=</span> <span class="va">yr</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 11 × 9</span></span>
<span><span class="co">#&gt;     year level    state       county         geoid name  variable estimate   moe</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt;       &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  2023 1_state  &lt;NA&gt;        &lt;NA&gt;           09    Conn… B01003_…  3598348    NA</span></span>
<span><span class="co">#&gt;  2  2023 2_county Connecticut &lt;NA&gt;           09110 Capi… B01003_…   969029    NA</span></span>
<span><span class="co">#&gt;  3  2023 2_county Connecticut &lt;NA&gt;           09120 Grea… B01003_…   326296    NA</span></span>
<span><span class="co">#&gt;  4  2023 2_county Connecticut &lt;NA&gt;           09130 Lowe… B01003_…   174983    NA</span></span>
<span><span class="co">#&gt;  5  2023 2_county Connecticut &lt;NA&gt;           09140 Naug… B01003_…   452303    NA</span></span>
<span><span class="co">#&gt;  6  2023 2_county Connecticut &lt;NA&gt;           09150 Nort… B01003_…    95829    NA</span></span>
<span><span class="co">#&gt;  7  2023 2_county Connecticut &lt;NA&gt;           09160 Nort… B01003_…   112848    NA</span></span>
<span><span class="co">#&gt;  8  2023 2_county Connecticut &lt;NA&gt;           09170 Sout… B01003_…   566803    NA</span></span>
<span><span class="co">#&gt;  9  2023 2_county Connecticut &lt;NA&gt;           09180 Sout… B01003_…   279025    NA</span></span>
<span><span class="co">#&gt; 10  2023 2_county Connecticut &lt;NA&gt;           09190 West… B01003_…   621232    NA</span></span>
<span><span class="co">#&gt; 11  2023 3_town   Connecticut South Central… 0917… New … B01003_…   132893    76</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="aggregating-and-analyzing-data">Aggregating and analyzing data<a class="anchor" aria-label="anchor" href="#aggregating-and-analyzing-data"></a>
</h2>
<p>The total population data is very straightforward, as it only has one variable, <code>B01003_001</code>. The tibble returned has the GEOID, except for custom geographies like regions; the name of each geography, including the names of each region; the variable codes; estimates; margins of error at the default 90% confidence level; the geographic level, numbered in order of decreasing size; and the counties of the towns.</p>
<p>The race and ethnicity table will require some calculations, using the brilliantly-titled <a href="https://github.com/camille-s/camiller" class="external-link"><code>camiller</code> package</a>:</p>
<ul>
<li>Using <code><a href="../reference/label_census.html">label_acs()</a></code>, join the <code>race</code> tibble with the <code><a href="../reference/acs_vars.html">cwi::acs_vars</a></code> dataset to get variable labels. Oftentimes, these labels need to be separated by their <code>"!!"</code> delimeter.</li>
<li>Group by the geographic level, county, and name.</li>
<li>Call <code><a href="https://camille-s.github.io/camiller/reference/add_grps.html" class="external-link">camiller::add_grps()</a></code> with a list of racial groups and their labels’ positions in the <code>label</code> column. This gives estimates and, optionally, margins of error for aggregates</li>
<li>
<code><a href="https://camille-s.github.io/camiller/reference/calc_shares.html" class="external-link">camiller::calc_shares()</a></code> then gives shares of each group’s estimate over the <code>"total"</code> denominator.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gnh_data</span><span class="op">$</span><span class="va">race</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/label_census.html">label_acs</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">yr</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://camille-s.github.io/camiller/reference/add_grps.html" class="external-link">add_grps</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>total <span class="op">=</span> <span class="fl">1</span>, white <span class="op">=</span> <span class="fl">3</span>, black <span class="op">=</span> <span class="fl">4</span>, latino <span class="op">=</span> <span class="fl">12</span>, other <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>, group <span class="op">=</span> <span class="va">label</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/calc_shares.html">calc_shares</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">label</span>, denom <span class="op">=</span> <span class="st">"total"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 130 × 5</span></span>
<span><span class="co">#&gt; # Groups:   level, name [26]</span></span>
<span><span class="co">#&gt;    level    name        label  estimate share</span></span>
<span><span class="co">#&gt;    &lt;fct&gt;    &lt;chr&gt;       &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 1_state  Connecticut total   3598348 NA   </span></span>
<span><span class="co">#&gt;  2 1_state  Connecticut white   2265780  0.63</span></span>
<span><span class="co">#&gt;  3 1_state  Connecticut black    355413  0.1 </span></span>
<span><span class="co">#&gt;  4 1_state  Connecticut latino   640668  0.18</span></span>
<span><span class="co">#&gt;  5 1_state  Connecticut other    336487  0.09</span></span>
<span><span class="co">#&gt;  6 2_county Capitol COG total    969029 NA   </span></span>
<span><span class="co">#&gt;  7 2_county Capitol COG white    590481  0.61</span></span>
<span><span class="co">#&gt;  8 2_county Capitol COG black    111597  0.12</span></span>
<span><span class="co">#&gt;  9 2_county Capitol COG latino   168439  0.17</span></span>
<span><span class="co">#&gt; 10 2_county Capitol COG other     98512  0.1 </span></span>
<span><span class="co">#&gt; # ℹ 120 more rows</span></span></code></pre></div>
</div>
<p>With the tenure table, it’s easiest to separate the labels by <code>"!!"</code>. Here the table can be wrangled into shares of households that are owner-occupied.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">homeownership</span> <span class="op">&lt;-</span> <span class="va">gnh_data</span><span class="op">$</span><span class="va">tenure</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/label_census.html">label_acs</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">yr</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html" class="external-link">separate</a></span><span class="op">(</span><span class="va">label</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span>, <span class="st">"tenure"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"!!"</span>, fill <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span>, <span class="va">tenure</span>, <span class="va">estimate</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/calc_shares.html">calc_shares</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">tenure</span>, denom <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tenure</span> <span class="op">==</span> <span class="st">"Owner occupied"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">homeownership</span></span>
<span><span class="co">#&gt; # A tibble: 26 × 5</span></span>
<span><span class="co">#&gt; # Groups:   level, name [26]</span></span>
<span><span class="co">#&gt;    level    name                               tenure         estimate share</span></span>
<span><span class="co">#&gt;    &lt;fct&gt;    &lt;chr&gt;                              &lt;fct&gt;             &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 1_state  Connecticut                        Owner occupied   939912  0.66</span></span>
<span><span class="co">#&gt;  2 2_county Capitol COG                        Owner occupied   254424  0.65</span></span>
<span><span class="co">#&gt;  3 2_county Greater Bridgeport COG             Owner occupied    77362  0.65</span></span>
<span><span class="co">#&gt;  4 2_county Lower Connecticut River Valley COG Owner occupied    55387  0.75</span></span>
<span><span class="co">#&gt;  5 2_county Naugatuck Valley COG               Owner occupied   120630  0.68</span></span>
<span><span class="co">#&gt;  6 2_county Northeastern Connecticut COG       Owner occupied    29835  0.76</span></span>
<span><span class="co">#&gt;  7 2_county Northwest Hills COG                Owner occupied    35683  0.76</span></span>
<span><span class="co">#&gt;  8 2_county South Central Connecticut COG      Owner occupied   137908  0.61</span></span>
<span><span class="co">#&gt;  9 2_county Southeastern Connecticut COG       Owner occupied    74923  0.65</span></span>
<span><span class="co">#&gt; 10 2_county Western Connecticut COG            Owner occupied   153760  0.66</span></span>
<span><span class="co">#&gt; # ℹ 16 more rows</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="visual-sketches">Visual sketches<a class="anchor" aria-label="anchor" href="#visual-sketches"></a>
</h2>
<p><code><a href="../reference/geo_level_plot.html">geo_level_plot()</a></code> gives a quick visual overview of the homeownership rates, highlighting town-level values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">homeownership</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/geo_level_plot.html">geo_level_plot</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">share</span>, hilite <span class="op">=</span> <span class="st">"darkslateblue"</span>, type <span class="op">=</span> <span class="st">"point"</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="cwi_files/figure-html/geo-plot-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p><code>acs_quick_map()</code> gives a quick map sketch of the rates. This function uses the Jenks algorithm for making breaks with <code><a href="../reference/jenks.html">jenks()</a></code>. This algorithm is well suited for visually displaying larger inequalities, but the number of breaks you give it won’t necessarily be the number of breaks returned.This function lets us see whether there’s a geographic distribution of this data with minimal work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tenure_map</span> <span class="op">&lt;-</span> <span class="va">homeownership</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">level</span> <span class="op">==</span> <span class="st">"4_town"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/quick_map.html">quick_map</a></span><span class="op">(</span></span>
<span>        value <span class="op">=</span> <span class="va">share</span>, level <span class="op">=</span> <span class="st">"town"</span>, color <span class="op">=</span> <span class="st">"black"</span>, linewidth <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span>        title <span class="op">=</span> <span class="st">"Homeownership, Greater New Haven"</span>, palette <span class="op">=</span> <span class="st">"BuPu"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">tenure_map</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="cwi_files/figure-html/quick-map1-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Since this returns a <code>ggplot</code> object with <code>sf</code> data, we can add additional <code>ggplot</code> functions, such as labeling, themes, or additional scales or geoms.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tenure_map</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html" class="external-link">str_glue</a></span><span class="op">(</span><span class="st">"By town, {yr}"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">name</span> <span class="op">==</span> <span class="st">"New Haven"</span><span class="op">)</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"black"</span>, linewidth <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="cwi_files/figure-html/quick-map2-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section class="section level2"><h2 id="batch-output">Batch output<a class="anchor" aria-label="anchor" href="#batch-output"></a>
</h2>
<p>Say as part of a pipeline, you need to do some calculations, write different sections of a data frame to CSV files to pass along to a colleague or refer to later, and then continue on to some more calculations. <code><a href="../reference/batch_csv_dump.html">batch_csv_dump()</a></code> takes either a list of data frames or a data frame plus a column to split by, and writes out a set of CSV files, then lets you move along to the next step in your pipeline.</p>
<p>For example, I need to pull a table of populations by age group for several regions of Connecticut. I don’t need to split populations by gender, so I’ll add up male and female populations for each age group. I don’t actually need to more detailed age groups now, but I need to stash them in files for later, so I’ll aggregate, write a bunch of files, and then aggregate into broader age groups that I need for my current work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_haven_regions</span> <span class="op">&lt;-</span> <span class="va">regions</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Greater New Haven"</span>, <span class="st">"New Haven Inner Ring"</span>,</span>
<span>    <span class="st">"New Haven Outer Ring"</span>, <span class="st">"Lower Naugatuck Valley"</span>,</span>
<span>    <span class="st">"Greater Waterbury"</span></span>
<span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multi_geo_acs.html">multi_geo_acs</a></span><span class="op">(</span></span>
<span>    table <span class="op">=</span> <span class="st">"B01001"</span>, year <span class="op">=</span> <span class="va">yr</span>, towns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    regions <span class="op">=</span> <span class="va">new_haven_regions</span>,</span>
<span>    counties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New Haven County"</span>, <span class="st">"Fairfield County"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/label_census.html">label_acs</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">yr</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="co"># shortcut around tidyr::separate</span></span>
<span>    <span class="fu"><a href="../reference/separate_acs.html">separate_acs</a></span><span class="op">(</span>into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"age"</span><span class="op">)</span>, drop_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">level</span>, <span class="va">age</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">age</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="op">~</span><span class="va">name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/batch_csv_dump.html">batch_csv_dump</a></span><span class="op">(</span>base_name <span class="op">=</span> <span class="st">"pop_by_age"</span>, bind <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">camiller</span><span class="fu">::</span><span class="fu"><a href="https://camille-s.github.io/camiller/reference/add_grps.html" class="external-link">add_grps</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ages00_04 <span class="op">=</span> <span class="fl">1</span>, ages05_17 <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, ages00_17 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>        group <span class="op">=</span> <span class="va">age</span>, value <span class="op">=</span> <span class="va">estimate</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span>, <span class="va">age</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="employment-trends">Employment trends<a class="anchor" aria-label="anchor" href="#employment-trends"></a>
</h2>
<section class="level2"><h3 id="quarterly-workforce-indicators">Quarterly Workforce Indicators<a class="anchor" aria-label="anchor" href="#quarterly-workforce-indicators"></a>
</h3>
<p>I’m also interested in learning about employment by industry over the past several years. <code><a href="../reference/qwi_industry.html">qwi_industry()</a></code> fetches county-level data by industry over time, either quarterly or annually. Here I’ll look at annual averages of all industries for South Central COG and Connecticut over the past 16 years. I’m filtering out the industry code “00”, which is the counts for all industries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scc_employment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/qwi_industry.html">qwi_industry</a></span><span class="op">(</span><span class="fl">2002</span><span class="op">:</span><span class="fl">2018</span>, counties <span class="op">=</span> <span class="st">"170"</span>, annual <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"South Central COG"</span><span class="op">)</span></span>
<span><span class="va">ct_employment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/qwi_industry.html">qwi_industry</a></span><span class="op">(</span><span class="fl">2002</span><span class="op">:</span><span class="fl">2018</span>, annual <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"Connecticut"</span><span class="op">)</span></span>
<span><span class="va">employment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">scc_employment</span>, <span class="va">ct_employment</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">industry</span> <span class="op">!=</span> <span class="st">"00"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">naics_codes</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">ind_level</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"industry"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">employment</span></span>
<span><span class="co">#&gt; # A tibble: 680 × 8</span></span>
<span><span class="co">#&gt;     year state county industry     emp payroll location          label          </span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;          </span></span>
<span><span class="co">#&gt;  1  2002 09    170    11         385.       NA South Central COG Agriculture, F…</span></span>
<span><span class="co">#&gt;  2  2002 09    170    21          31.2      NA South Central COG Mining, Quarry…</span></span>
<span><span class="co">#&gt;  3  2002 09    170    22        1093.       NA South Central COG Utilities      </span></span>
<span><span class="co">#&gt;  4  2002 09    170    23       11146.       NA South Central COG Construction   </span></span>
<span><span class="co">#&gt;  5  2002 09    170    31-33    33445.       NA South Central COG Manufacturing  </span></span>
<span><span class="co">#&gt;  6  2002 09    170    42       11496.       NA South Central COG Wholesale Trade</span></span>
<span><span class="co">#&gt;  7  2002 09    170    44-45    32976.       NA South Central COG Retail Trade   </span></span>
<span><span class="co">#&gt;  8  2002 09    170    48-49     5738        NA South Central COG Transportation…</span></span>
<span><span class="co">#&gt;  9  2002 09    170    51       11863.       NA South Central COG Information    </span></span>
<span><span class="co">#&gt; 10  2002 09    170    52       10686.       NA South Central COG Finance and In…</span></span>
<span><span class="co">#&gt; # ℹ 670 more rows</span></span></code></pre></div>
</div>
<p>Next, say I want to look at the industries that were largest in the South Central COG in 2018, and see how those have changed both for the COG and statewide over this time period. I’ll filter <code>employment</code>, get the industries with the largest numbers of employees, then filter <code>employment</code> for just those industries and plot it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">top2018</span> <span class="op">&lt;-</span> <span class="va">employment</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2018</span>, <span class="va">county</span> <span class="op">==</span> <span class="st">"170"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html" class="external-link">top_n</a></span><span class="op">(</span><span class="fl">8</span>, <span class="va">emp</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">industry</span><span class="op">)</span></span>
<span><span class="va">top2018</span></span>
<span><span class="co">#&gt; [1] "31-33" "44-45" "54"    "56"    "61"    "62"    "72"    "81"</span></span>
<span></span>
<span><span class="va">employment</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">industry</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">top2018</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">label</span>, <span class="fl">1</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Emp_1k <span class="op">=</span> <span class="va">emp</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">Emp_1k</span>, color <span class="op">=</span> <span class="va">label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>        x <span class="op">=</span> <span class="st">"Year"</span>, y <span class="op">=</span> <span class="st">"Employees (thousands)"</span>, title <span class="op">=</span> <span class="st">"Employment by industry"</span>,</span>
<span>        subtitle <span class="op">=</span> <span class="st">"Connecticut and South Central COG, 2002-2018"</span>, color <span class="op">=</span> <span class="st">"Industry"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="cwi_files/figure-html/qwi2-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section class="level2"><h3 id="local-area-unemployment-statistics">Local Area Unemployment Statistics<a class="anchor" aria-label="anchor" href="#local-area-unemployment-statistics"></a>
</h3>
<p>To look at unemployment rates over time, I can use <code><a href="../reference/laus_trend.html">laus_trend()</a></code>. The LAUS covers smaller geographies than the QWI, so <code><a href="../reference/laus_trend.html">laus_trend()</a></code> is set up to find data by a combination of state, counties, or towns. The LAUS API returns monthly data on labor force counts, employment counts, unemployed counts, and unemployment rate; <code><a href="../reference/laus_trend.html">laus_trend()</a></code> lets you specify which of these measures to fetch.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unemployment</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/laus_trend.html">laus_trend</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New Haven"</span>, <span class="st">"New Haven County"</span>, <span class="st">"Connecticut"</span><span class="op">)</span>,</span>
<span>    startyear <span class="op">=</span> <span class="fl">2000</span>, endyear <span class="op">=</span> <span class="fl">2018</span>, measures <span class="op">=</span> <span class="st">"unemployment rate"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>unemployment_rate <span class="op">=</span> <span class="va">unemployment_rate</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">area</span>, <span class="va">date</span>, value <span class="op">=</span> <span class="va">unemployment_rate</span><span class="op">)</span></span>
<span></span>
<span><span class="va">unemployment</span></span>
<span><span class="co">#&gt; # A tibble: 456 × 3</span></span>
<span><span class="co">#&gt;    area        date       value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Connecticut 2000-01-01 0.028</span></span>
<span><span class="co">#&gt;  2 New Haven   2000-01-01 0.038</span></span>
<span><span class="co">#&gt;  3 Connecticut 2000-02-01 0.029</span></span>
<span><span class="co">#&gt;  4 New Haven   2000-02-01 0.037</span></span>
<span><span class="co">#&gt;  5 Connecticut 2000-03-01 0.024</span></span>
<span><span class="co">#&gt;  6 New Haven   2000-03-01 0.033</span></span>
<span><span class="co">#&gt;  7 Connecticut 2000-04-01 0.019</span></span>
<span><span class="co">#&gt;  8 New Haven   2000-04-01 0.029</span></span>
<span><span class="co">#&gt;  9 Connecticut 2000-05-01 0.021</span></span>
<span><span class="co">#&gt; 10 New Haven   2000-05-01 0.032</span></span>
<span><span class="co">#&gt; # ℹ 446 more rows</span></span>
<span></span>
<span><span class="va">unemp_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">unemployment</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span>, group <span class="op">=</span> <span class="va">area</span>, color <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>se <span class="op">=</span> <span class="cn">FALSE</span>, method <span class="op">=</span> <span class="st">"loess"</span>, linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">unemp_plot</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="cwi_files/figure-html/laus-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
