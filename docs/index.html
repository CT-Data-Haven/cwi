<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prep for DataHaven's Community Wellbeing Index • cwi</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Prep for DataHaven's Community Wellbeing Index">
<meta property="og:description" content="This is a collection of functions for collecting and analyzing Census data and other sources to write the 2019 Community Wellbeing Index reports. It also contains reference tables for local geographies—neighborhoods, regions, etc—and commonly used ACS table numbers.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cwi</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/basic-workflow.html">Basic workflow</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CT-Data-Haven/cwi">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="cwi" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#cwi" class="anchor"></a>cwi <img src="reference/figures/logo.png" align="right">
</h1></div>
<p>The goal of <code>cwi</code> is to get data, primarily the Census ACS, fetched, aggregated, and analyzed for <a href="http://ctdatahaven.org/reports/greater-new-haven-community-index">DataHaven’s 2019 Community Index reports</a>. This includes functions to speed up and standardize analysis for multiple staff people, preview trends and patterns we’ll need to write about, and get data in more layperson-friendly formats.</p>
<p>It depends on many functions from Camille’s brilliantly-named <a href="https://github.com/camille-s/camiller"><code>camiller</code></a> package.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install this package from <a href="https://github.com/CT-Data-Haven/cwi">GitHub</a> with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"CT-Data-Haven/cwi"</span>)</code></pre></div>
</div>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<p>In addition to <code>camiller</code>, this package relies heavily on:</p>
<ul>
<li>The <a href="http://tidyverse.org/"><code>tidyverse</code></a> packages, namely <code>magrittr</code>, <code>dplyr</code>, <code>tidyr</code>, <code>purrr</code>, <code>readr</code>, <code>stringr</code>, <code>forcats</code>, and <code>ggplot2</code> (version &gt;= 3.0.0) (so basically <em>all</em> the tidyverse)</li>
<li>
<code>rlang</code> and <code>tidyselect</code> for non-standard evaluation in many functions</li>
<li>
<code>tidycensus</code> for actually getting all the Census data</li>
<li>
<code>sf</code> isn’t required but it’s encouraged</li>
</ul>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p><code>cwi</code> ships with several datasets and shapefiles. These include:</p>
<ul>
<li>Shapes (as <code>sf</code> objects) of towns, tracts, and city neighborhoods for New Haven, Hartford, Bridgeport, and Stamford</li>
<li>Common ACS table numbers—hopefully decreases time spent prowling around <a href="https://factfinder.census.gov">FactFinder</a>
</li>
<li>Definitions of neighborhoods by tract or block group, and of regions by town</li>
</ul>
</div>
<div id="sources" class="section level2">
<h2 class="hasAnchor">
<a href="#sources" class="anchor"></a>Sources</h2>
<p>This package contains functions to make it easier and more reproducible to fetch and analyze data from:</p>
<ul>
<li>
<a href="https://www.census.gov/programs-surveys/acs/">American Community Survey</a> (US Census Bureau)</li>
<li>
<a href="https://www.census.gov/programs-surveys/decennial-census.html">Decennial Census</a> (US Census Bureau)</li>
<li>
<a href="https://lehd.ces.census.gov/">Quarterly Workforce Indicators</a> (US Census Bureau Center for Economic Studies)</li>
<li>
<a href="https://www.bls.gov/lau/">Local Area Unemployment Statistics</a> (Bureau of Labor Statistics)</li>
</ul>
<p>More to come (as of 7/17/2018) may include simplifications of working with <a href="https://lehd.ces.census.gov/data/">LEHD Origin-Destination Employment Statistics</a> (LODES) and ACS public use microdata samples (PUMS) via <a href="https://usa.ipums.org/usa/">IPUMS</a>.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Here’s an example of getting a big table to calculate homeownership rates across many geographies at once:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(cwi)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tenure &lt;-<span class="st"> </span><span class="kw"><a href="reference/multi_geo_acs.html">multi_geo_acs</a></span>(
  <span class="dt">table =</span> basic_table_nums<span class="op">$</span>tenure,
  <span class="dt">year =</span> <span class="dv">2016</span>,
  <span class="dt">regions =</span> regions[<span class="kw">c</span>(<span class="st">"Greater New Haven"</span>, <span class="st">"New Haven Inner Ring"</span>, <span class="st">"New Haven Outer Ring"</span>)],
  <span class="dt">counties =</span> <span class="st">"New Haven"</span>,
  <span class="dt">us =</span> T
)
<span class="co">#&gt; Table: TENURE</span>
<span class="co">#&gt; Geographies included:</span>
<span class="co">#&gt; Towns: all</span>
<span class="co">#&gt; Regions: Greater New Haven, New Haven Inner Ring, New Haven Outer Ring</span>
<span class="co">#&gt; Counties: New Haven County</span>
<span class="co">#&gt; State: 09</span>
<span class="co">#&gt; US: Yes</span>
tenure
<span class="co">#&gt; # A tibble: 99 x 8</span>
<span class="co">#&gt;    GEOID NAME            variable   estimate    moe level     state county</span>
<span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;         &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; </span>
<span class="co">#&gt;  1 1     United States   B25003_001   1.18e8 222078 1_us      &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt;  2 1     United States   B25003_002   7.49e7 360470 1_us      &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt;  3 1     United States   B25003_003   4.28e7 142056 1_us      &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt;  4 09    Connecticut     B25003_001   1.35e6   3509 2_state   &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt;  5 09    Connecticut     B25003_002   9.00e5   5427 2_state   &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt;  6 09    Connecticut     B25003_003   4.54e5   3843 2_state   &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt;  7 09009 New Haven Coun… B25003_001   3.26e5   1531 3_counti… 09    &lt;NA&gt;  </span>
<span class="co">#&gt;  8 09009 New Haven Coun… B25003_002   2.04e5   1887 3_counti… 09    &lt;NA&gt;  </span>
<span class="co">#&gt;  9 09009 New Haven Coun… B25003_003   1.23e5   1716 3_counti… 09    &lt;NA&gt;  </span>
<span class="co">#&gt; 10 &lt;NA&gt;  Greater New Ha… B25003_001   1.77e5   1434 4_regions &lt;NA&gt;  &lt;NA&gt;  </span>
<span class="co">#&gt; # ... with 89 more rows</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">homeownership &lt;-<span class="st"> </span>tenure <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/label_acs.html">label_acs</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="dt">name =</span> NAME, level, label, estimate) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>((<span class="op">!</span><span class="kw">str_detect</span>(level, <span class="st">"towns"</span>)) <span class="op">|</span><span class="st"> </span>name <span class="op">%in%</span><span class="st"> </span>regions<span class="op">$</span><span class="st">`</span><span class="dt">Greater New Haven</span><span class="st">`</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">label =</span> <span class="kw">str_remove</span>(label, <span class="st">"Total!!"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(level, name) <span class="op">%&gt;%</span>
<span class="st">  </span>camiller<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/camiller/topics/calc_shares">calc_shares</a></span>(<span class="dt">group =</span> label) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(label <span class="op">==</span><span class="st"> "Owner occupied"</span>)

homeownership
<span class="co">#&gt; # A tibble: 19 x 5</span>
<span class="co">#&gt; # Groups:   level, name [19]</span>
<span class="co">#&gt;    level      name                 label          estimate share</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;                &lt;fct&gt;             &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 1_us       United States        Owner occupied 74881068 0.636</span>
<span class="co">#&gt;  2 2_state    Connecticut          Owner occupied   900223 0.665</span>
<span class="co">#&gt;  3 3_counties New Haven County     Owner occupied   203568 0.624</span>
<span class="co">#&gt;  4 4_regions  Greater New Haven    Owner occupied   106876 0.602</span>
<span class="co">#&gt;  5 4_regions  New Haven Inner Ring Owner occupied    34337 0.629</span>
<span class="co">#&gt;  6 4_regions  New Haven Outer Ring Owner occupied    58447 0.802</span>
<span class="co">#&gt;  7 5_towns    Bethany              Owner occupied     1807 0.904</span>
<span class="co">#&gt;  8 5_towns    Branford             Owner occupied     8331 0.679</span>
<span class="co">#&gt;  9 5_towns    East Haven           Owner occupied     7919 0.705</span>
<span class="co">#&gt; 10 5_towns    Guilford             Owner occupied     7314 0.855</span>
<span class="co">#&gt; 11 5_towns    Hamden               Owner occupied    15335 0.657</span>
<span class="co">#&gt; 12 5_towns    Madison              Owner occupied     5932 0.874</span>
<span class="co">#&gt; 13 5_towns    Milford              Owner occupied    16314 0.757</span>
<span class="co">#&gt; 14 5_towns    New Haven            Owner occupied    14092 0.282</span>
<span class="co">#&gt; 15 5_towns    North Branford       Owner occupied     4818 0.883</span>
<span class="co">#&gt; 16 5_towns    North Haven          Owner occupied     6969 0.833</span>
<span class="co">#&gt; 17 5_towns    Orange               Owner occupied     4267 0.867</span>
<span class="co">#&gt; 18 5_towns    West Haven           Owner occupied    11083 0.555</span>
<span class="co">#&gt; 19 5_towns    Woodbridge           Owner occupied     2695 0.919</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/geo_level_plot.html">geo_level_plot</a></span>(homeownership, <span class="dt">value =</span> share, <span class="dt">hilite =</span> <span class="st">"#EA7FA2"</span>, 
               <span class="dt">title =</span> <span class="st">"Homeownership in Greater New Haven, 2016"</span>)</code></pre></div>
<p><img src="reference/figures/README-geo_plot-1.png" width="100%"></p>
<p>See more detail in the vignette: <code>vignette("Basic workflow", "cwi")</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/CT-Data-Haven/cwi">https://​github.com/​CT-Data-Haven/​cwi</a>
</li>
<li>Report a bug at <br><a href="https://github.com/CT-Data-Haven/cwi/issues">https://​github.com/​CT-Data-Haven/​cwi/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Camille Seaberry <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
