<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • cwi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://CT-Data-Haven.github.io/cwi/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cwi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cwi.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/acs-updates.html">ACS updates</a></li>
    <li><a class="dropdown-item" href="../articles/regions.html">Regions</a></li>
    <li><a class="dropdown-item" href="../articles/shapefiles.html">Shapefiles</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CT-Data-Haven/cwi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/CT-Data-Haven/cwi/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.9.0" id="cwi-190">cwi 1.9.0<a class="anchor" aria-label="anchor" href="#cwi-190"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.8.0" id="cwi-180">cwi 1.8.0<a class="anchor" aria-label="anchor" href="#cwi-180"></a></h2>
<ul><li>Fixed neighborhood shapefiles. These now come directly from cities’ data portals in the <a href="https://github.com/CT-Data-Haven/scratchpad" class="external-link">scratchpad repo</a>, where they’re published as a release, giving us a single source of truth for what those boundaries are. There were also errors where a few neighborhoods in Hartford / West Hartford and Stamford received tracts outside the city boundaries. As a result, weights tables have changed a fair amount. We’d also used our own combinations of Stamford neighborhoods but now have those from the city, with some shifts in what neighborhoods are lumped together and how they’re labeled.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.7.1" id="cwi-171">cwi 1.7.1<a class="anchor" aria-label="anchor" href="#cwi-171"></a></h2>
<ul><li>Updated and improved methods for making <code>zip2town</code> crosswalk, based on 2020 / 2022 geographies. The columns included in the data frame are slightly changed.</li>
<li>Fixed issues with <code>qwi_industry</code>: the API now uses COGs for Connecticut instead of counties.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.7.0" id="cwi-170">cwi 1.7.0<a class="anchor" aria-label="anchor" href="#cwi-170"></a></h2>
<p>Moved <code>add_logo</code> to the stylehaven package.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.6.3" id="cwi-163">cwi 1.6.3<a class="anchor" aria-label="anchor" href="#cwi-163"></a></h2>
<p>Bumping package versions just to draw attention to the fact that there’s now a set of PUMA proxy crosswalks; see <code>proxy_pumas</code>.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.6.2" id="cwi-162">cwi 1.6.2<a class="anchor" aria-label="anchor" href="#cwi-162"></a></h2>
<p>Edit <code>xwalk</code>—there were still more FIPS codes to update with their COG-based versions. The data frame now includes COG-based codes for block groups, tracts, towns, and PUMAs.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.6.1" id="cwi-161">cwi 1.6.1<a class="anchor" aria-label="anchor" href="#cwi-161"></a></h2>
<p>Bump ACS-related defaults to 2022</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.6.0" id="cwi-160">cwi 1.6.0<a class="anchor" aria-label="anchor" href="#cwi-160"></a></h2>
<p><strong>MINOR BREAKING CHANGE:</strong> This update corresponds to the 2022 ACS data release, which is the first to use COGs instead of counties. Because COGs have different FIPS codes, town and tract FIPS codes (but apparently not block groups) have changed to match. The bulk of their code digits stay the same, but the portion signifying the county changed, e.g. 09<strong>009</strong>140101 is now 09<strong>170</strong>140101. To deal with that without breaking too much code, there are a few changes to the package:</p>
<ul><li>Neighborhood lookup tables (<code>bridgeport_tracts</code>, etc) have the previous county-based FIPS codes in the column <code>geoid</code>, and the new COG-based FIPS codes in the column <code>geoid_cog</code>.</li>
<li>
<code>xwalk</code> now has columns for COG-based town and tract FIPS codes, in addition to the previous county-based ones.</li>
<li>Calling <code>multi_geo_acs</code> with <code>counties = "all"</code> (the default) will get you COGs, but <code>multi_geo_decennial</code> will get you counties, because the switch was not retroactive.</li>
<li>The names of COGs returned by <code>multi_geo_acs</code> and used for names in the <code>regions</code> list are the ones the Census Bureau uses. Unfortunately, these aren’t all the ones the state uses. For that, I’ve added a function <code>fix_cogs</code>, which replaces common names for them with the ones the state lists somewhat officially, e.g. Capitol COG is in the census data, Capitol Region COG is what the state usually uses but probably not always.</li>
<li>Finally, the part that doesn’t come up often but will break: previously the <code>multi_geo_*</code> functions took neighborhood names, weights, and GEOIDs as bare column names, with defaults (name, weight, and geoid, respectively). These now have to all be given as strings (i.e. in quotation marks), and geoid no longer has a default. This is to deal with the fact that some calculations will now need the neighborhood lookup tables’ <code>geoid</code> columns, and some will need <code>geoid_cog</code>. This only matters when you’re including neighborhoods in function calls.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.5.0" id="cwi-150">cwi 1.5.0<a class="anchor" aria-label="anchor" href="#cwi-150"></a></h2>
<ul><li>The 2020 decennial census added a few dozen new census designated places, which is what <code>village2town</code> is based on. They now overlap with towns even less well than they used to. The table has been recalculated, with towns and villages joined based on overlapping population from the 2020 decennial, and now includes populations and weights in the crosswalk. That means things could break if you’re expecting one set of CDPs and get another, or if you’re not expecting new columns in that table.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.0" id="cwi-140">cwi 1.4.0<a class="anchor" aria-label="anchor" href="#cwi-140"></a></h2>
<ul><li>
<strong>MINOR BREAKING CHANGE:</strong> <code>multi_geo_decennial</code> now defaults to 2020. Because the 2020 decennial uses a different summary file code from previous years, the default <code>sumfile</code> argument, if used with 2010, <em>will lead to an error.</em>
</li>
<li>2020 decennial variables are now available in <code>decennial_vars20</code>. The 2010 ones are still in <code>decennial_vars10</code>.</li>
<li>A new data frame, <code>cb_avail</code>, has the years, programs (ACS vs decennial), and dataset codes (SF1, ACS5, DHC, etc.) available from the Census Bureau’s API.</li>
<li>The function <code>dh_scaffold</code> was poorly named and not a great fit for the aims of this project. It’s been moved to {stylehaven}; find it there as <code>scaffold_project</code>.</li>
<li>Minor improvements to some warnings and other messages.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.0" id="cwi-130">cwi 1.3.0<a class="anchor" aria-label="anchor" href="#cwi-130"></a></h2>
<ul><li>Add COGs to xwalk along with function for reconciling names</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.0" id="cwi-120">cwi 1.2.0<a class="anchor" aria-label="anchor" href="#cwi-120"></a></h2>
<ul><li>Update defaults to 2021 where applicable: <code>multi_geo_acs</code>, <code>adj_inflation</code> base year, <code>label_acs</code>.</li>
<li>Replace <code>acs_vars20</code> with <code>acs_vars21</code>.</li>
<li>
<code>multi_geo_decennial</code> now takes <code>"pl"</code> as a possible value for summary file, since the full 2020 Decennial data still aren’t out.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.3" id="cwi-113">cwi 1.1.3<a class="anchor" aria-label="anchor" href="#cwi-113"></a></h2>
<ul><li>Add regional councils of governments to <code>regions</code> list. Connecticut adopted these in 2022 to replace counties. Definitions from CTOPM <a href="https://data.ct.gov/Government/Regional-Councils-of-Governments-Boundaries/idnf-uwvz" class="external-link">here</a>.</li>
<li>Add vignette on regions since there’s so many of them now</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.2" id="cwi-112">cwi 1.1.2<a class="anchor" aria-label="anchor" href="#cwi-112"></a></h2>
<ul><li>Start handling updated MSA definitions—not sure that any datasets actually use these yet</li>
<li>Add <code>rescale</code> option to <code>sub_nonanswers</code>—its default won’t change any existing code</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.1" id="cwi-111">cwi 1.1.1<a class="anchor" aria-label="anchor" href="#cwi-111"></a></h2>
<p><strong>Bugfix:</strong> occupational codes have larger groups and smaller groups. One larger group (Healthcare Practitioners and Technical Occupations) was mislabeled so it was marked as being under Education, Legal, Community Service, Arts, and Media Occupations.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="cwi-110">cwi 1.1.0<a class="anchor" aria-label="anchor" href="#cwi-110"></a></h2>
<p><strong>Some updates to 2020</strong></p>
<ul><li>2020 ACS 5-year data are finally out, so <code>acs_vars19</code> has been replaced by <code>acs_vars20</code>, and <code>multi_geo_acs</code> now uses 2020 as the default. Some examples &amp; vignette code have been updated to match.</li>
<li>Decennial census data <em>aren’t</em> out yet and won’t be for some time, so decennial-related things still default to 2010.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="cwi-100">cwi 1.0.0<a class="anchor" aria-label="anchor" href="#cwi-100"></a></h2>
<p><strong>Major exciting overhaul!</strong> This was the first time I felt like enough of this package is flexible and well thought out to consider it a real release. A lot of the changes are under the hood–I split a lot of functions into slimmed-down main “caller” functions and multiple task-focused “helper” functions, making it easier to maintain the package, add or modify features, and use the same code for multiple tasks.</p>
<div class="section level3">
<h3 id="user-facing-updates-1-0-0">User-facing updates<a class="anchor" aria-label="anchor" href="#user-facing-updates-1-0-0"></a></h3>
<ul><li>Moved from base messages to <code>cli</code> for cleaner and clearer messaging (printouts on what fetch functions are getting, limitations to function calls, etc)</li>
<li>Better handling of Census API calls to better deal with how very often their servers are busted</li>
<li>Metadata: several behind-the-scenes datasets that set limits of functions’ API calls are now expanded to not just be limited to Connecticut–includes <code>qwi_industry</code> and <code>laus_trend</code>.</li>
<li>Added a table of occupation codes for main occupation groups</li>
<li>Better documentation for many functions</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-1-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-0-0"></a></h3>
<ul><li>I’ve never liked the levels for the <code>multi_geo_*</code> functions–I don’t really remember why I made these plural, but they’re now singular. So a column that would have been e.g. “1_state”, “2_counties”, “3_towns” will now be “1_state”, “2_county”, “3_town”. This might break filtering you’ve done by level.</li>
<li>Renamed one function: <code>acs_quick_map</code> –&gt; <code>quick_map</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="to-do-1-0-0">To do<a class="anchor" aria-label="anchor" href="#to-do-1-0-0"></a></h3>
<ul><li>Update to 2020 ACS and Decennial defaults</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.5" id="cwi-045">cwi 0.4.5<a class="anchor" aria-label="anchor" href="#cwi-045"></a></h2>
<ul><li>Add sleep argument to <code>multi_geo_acs</code> for dealing with API crashes.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.4" id="cwi-044">cwi 0.4.4<a class="anchor" aria-label="anchor" href="#cwi-044"></a></h2>
<ul><li>Add handling for reading crosstab weights placed in headers alongside data rather than in a separate table (e.g. for 2021).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.3" id="cwi-043">cwi 0.4.3<a class="anchor" aria-label="anchor" href="#cwi-043"></a></h2>
<ul><li>Import <code><a href="https://camille-s.github.io/camiller/reference/calc_shares.html" class="external-link">camiller::calc_shares</a></code>
</li>
<li>Add sample data from the ACS: <code>gnh_tenure</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.2" id="cwi-042">cwi 0.4.2<a class="anchor" aria-label="anchor" href="#cwi-042"></a></h2>
<p>Since the 2020 ACS is delayed, I decided we should still have copies of 2019 geography-related files. This should be temporary, but for now there are 2 versions of the tract shapefile (<code>tract_sf</code> and <code>tract_sf19</code>), and 2 versions of each neighborhood-tract weight table (e.g. <code>new_haven_tracts</code> and <code>new_haven_tracts19</code>, and so on). Once all the data is out, I’ll remove the 2019 versions and bump up the package version.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.1" id="cwi-041">cwi 0.4.1<a class="anchor" aria-label="anchor" href="#cwi-041"></a></h2>
<ul><li>Update <code>tract_sf</code> and <code>town_sf</code> to 2020 boundaries. Don’t expect anything should have changed for towns, but many tracts were added after the Census Bureau released redistricting data.</li>
<li>Handle typos in some crosstabs.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="cwi-040">cwi 0.4.0<a class="anchor" aria-label="anchor" href="#cwi-040"></a></h2>
<ul><li>Rewrote neighborhood weights with the 2020 redistricting block boundaries. Dropped the block group table that was only done for New Haven, and changed the name of <code>nhv_tracts</code> to <code>new_haven_tracts</code> to match those for other cities.</li>
<li>QWI API is working again, but payroll data is missing from their database.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.2" id="cwi-032">cwi 0.3.2<a class="anchor" aria-label="anchor" href="#cwi-032"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.1" id="cwi-031">cwi 0.3.1<a class="anchor" aria-label="anchor" href="#cwi-031"></a></h2>
<ul><li>Minor behind-the-scenes updates</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="cwi-030">cwi 0.3.0<a class="anchor" aria-label="anchor" href="#cwi-030"></a></h2>
<ul><li>QWI example in the basic workflow vignette is currently turned off, because the Census QWI API has been down for at least a few days now. Will turn it back on when the API is (hopefully) back online.</li>
<li>
<strong>New function:</strong> Add a function <code>separate_acs</code> as a very lazy way to split ACS labels.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="cwi-020">cwi 0.2.0<a class="anchor" aria-label="anchor" href="#cwi-020"></a></h2>
<ul><li>Added finished versions of <code>read_xtab</code>, <code>read_weights</code>, <code>xtab2df</code>, and <code>collapse_n_wt</code> for working with DataHaven Community Wellbeing Survey crosstabs—see vignettes</li>
<li>Added <code>add_logo</code> with built-in DataHaven logo</li>
<li>Bug fixes in <code>sub_nonanswers</code>, <code>xwalk</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="cwi-013">cwi 0.1.3<a class="anchor" aria-label="anchor" href="#cwi-013"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="cwi-012">cwi 0.1.2<a class="anchor" aria-label="anchor" href="#cwi-012"></a></h2>
<ul><li>
<code>multi_geo_acs</code> &amp; <code>multi_geo_decennial</code> call <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">janitor::clean_names</a></code> before returning. This keeps columns aligned properly if neighborhoods are included.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="cwi-011">cwi 0.1.1<a class="anchor" aria-label="anchor" href="#cwi-011"></a></h2>
<ul><li>Expanded <code>xwalk</code> data to include more geographic levels.</li>
<li>Minor vignette cleanup.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="cwi-010">cwi 0.1.0<a class="anchor" aria-label="anchor" href="#cwi-010"></a></h2>
<ul><li>Added a <code>NEWS.md</code> file to track changes to the package.</li>
<li>Functions that make use of API keys have explicit key arguments so Census and BLS API keys don’t have to be stored in specific environment variables, though they’ll still default to those same environment variables.</li>
<li>Installation should be easier and have less overhead, because there are now fewer dependencies.</li>
<li>Fixed bugs with BLS API in <code>adj_inflation</code>.</li>
<li>Both <code>multi_geo_acs</code> and <code>multi_geo_decennial</code> can aggregate neighborhood data. There’s an example in the workflow vignette.</li>
<li>Should now be up to date with newer <code>dplyr</code> 1.0.0 &amp; <code>tidyr</code> 1.0.0 functions.</li>
<li>
<strong>New functions:</strong> <code>jenks</code>, <code>dh_scaffold</code>
</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

