<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prep for DataHaven's Community Wellbeing Index • cwi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Prep for DataHaven's Community Wellbeing Index">
<meta property="og:description" content="This is a collection of functions for collecting
    and analyzing Census data and other sources to write the 2019
    Community Wellbeing Index reports. It also contains reference tables
    for local geographies—neighborhoods, regions, etc—and commonly used
    ACS table numbers.">
<meta property="og:image" content="https://CT-Data-Haven.github.io/cwi/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cwi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/acs-updates.html">ACS updates</a>
    </li>
    <li>
      <a href="articles/basic-workflow.html">Basic workflow</a>
    </li>
    <li>
      <a href="articles/crosstabs.html">Working with Community Wellbeing Survey crosstabs</a>
    </li>
    <li>
      <a href="articles/shapefiles.html">Shapefiles</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CT-Data-Haven/cwi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="cwi-">cwi <img src="reference/figures/logo.png" align="right"><a class="anchor" aria-label="anchor" href="#cwi-"></a>
</h1></div>
<!-- badges: start -->
<p>The original goal of <code>cwi</code> was to get data, primarily the Census ACS, fetched, aggregated, and analyzed for <a href="http://ctdatahaven.org/reports/greater-new-haven-community-index" class="external-link">DataHaven’s 2019 Community Index reports</a>. It’s now evolved to support more of our day-to-day work—and now we’re on the 2022 reports! This includes functions to speed up and standardize analysis for multiple staff people, preview trends and patterns we’ll need to write about, and get data in more layperson-friendly formats.</p>
<p>It pairs well with many functions from Camille’s brilliantly-named <a href="https://github.com/camille-s/camiller" class="external-link"><code>camiller</code></a> package.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install this package from <a href="https://github.com/CT-Data-Haven/cwi" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"CT-Data-Haven/cwi"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>This package relies heavily on:</p>
<ul>
<li>The <a href="http://tidyverse.org/" class="external-link"><code>tidyverse</code></a> packages, namely <code>magrittr</code>, <code>dplyr</code>, <code>tidyr</code>, <code>purrr</code>, <code>stringr</code>, <code>forcats</code>, and <code>ggplot2</code> (version &gt;= 3.0.0) (so a lot the tidyverse)</li>
<li>
<code>rlang</code> and <code>tidyselect</code> for non-standard evaluation in many functions</li>
<li>
<code>tidycensus</code> for actually getting all the Census data</li>
<li>
<code>sf</code> isn’t required but it’s encouraged</li>
</ul>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p><code>cwi</code> ships with several datasets and shapefiles. These include:</p>
<ul>
<li>Shapes (as <code>sf</code> objects) of towns, tracts, and city neighborhoods for New Haven, Hartford, Bridgeport, and Stamford</li>
<li>Common ACS table numbers—hopefully decreases time spent prowling around <a href="https://data.census.gov" class="external-link">the Census Bureau site</a>
</li>
<li>Definitions of neighborhoods by tract or block group, and of regions by town</li>
</ul>
</div>
<div class="section level2">
<h2 id="sources">Sources<a class="anchor" aria-label="anchor" href="#sources"></a>
</h2>
<p>This package contains functions to make it easier and more reproducible to fetch and analyze data from:</p>
<ul>
<li>
<a href="https://www.census.gov/programs-surveys/acs/" class="external-link">American Community Survey</a> (US Census Bureau)</li>
<li>
<a href="https://www.census.gov/programs-surveys/decennial-census.html" class="external-link">Decennial Census</a> (US Census Bureau)</li>
<li>
<a href="https://lehd.ces.census.gov/" class="external-link">Quarterly Workforce Indicators</a> (US Census Bureau Center for Economic Studies)</li>
<li>
<a href="https://www.bls.gov/lau/" class="external-link">Local Area Unemployment Statistics</a> (Bureau of Labor Statistics)</li>
<li><a href="https://ctdatahaven.org/reports/datahaven-community-wellbeing-survey" class="external-link">DataHaven’s Community Wellbeing Survey</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Here’s an example of getting a big table to calculate homeownership rates across many geographies at once:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CT-Data-Haven/cwi" class="external-link">cwi</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tenure</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/multi_geo_acs.html">multi_geo_acs</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="va">basic_table_nums</span><span class="op">$</span><span class="va">tenure</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  regions <span class="op">=</span> <span class="va">regions</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Greater New Haven"</span>, <span class="st">"New Haven Inner Ring"</span>, <span class="st">"New Haven Outer Ring"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  counties <span class="op">=</span> <span class="st">"New Haven"</span>,</span>
<span>  towns <span class="op">=</span> <span class="va">regions</span><span class="op">[[</span><span class="st">"Greater New Haven"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  us <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Table B25003: TENURE, 2020 ──────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; • Towns: Bethany, Branford, East Haven, Guilford, Hamden, Madison, Milford, New</span></span>
<span><span class="co">#&gt; Haven, North Branford, North Haven, Orange, West Haven, Woodbridge</span></span>
<span><span class="co">#&gt; • Regions: Greater New Haven, New Haven Inner Ring, New Haven Outer Ring</span></span>
<span><span class="co">#&gt; • Counties: New Haven County</span></span>
<span><span class="co">#&gt; • State: 09</span></span>
<span><span class="co">#&gt; • US: Yes</span></span>
<span><span class="va">tenure</span></span>
<span><span class="co">#&gt; # A tibble: 57 × 9</span></span>
<span><span class="co">#&gt;     year level    state       county geoid name         variable estimate    moe</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;fct&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  2020 1_us     &lt;NA&gt;        &lt;NA&gt;   1     United Stat… B25003_…   1.22e8 211970</span></span>
<span><span class="co">#&gt;  2  2020 1_us     &lt;NA&gt;        &lt;NA&gt;   1     United Stat… B25003_…   7.88e7 342600</span></span>
<span><span class="co">#&gt;  3  2020 1_us     &lt;NA&gt;        &lt;NA&gt;   1     United Stat… B25003_…   4.36e7 134985</span></span>
<span><span class="co">#&gt;  4  2020 2_state  &lt;NA&gt;        &lt;NA&gt;   09    Connecticut  B25003_…   1.39e6   3268</span></span>
<span><span class="co">#&gt;  5  2020 2_state  &lt;NA&gt;        &lt;NA&gt;   09    Connecticut  B25003_…   9.15e5   5015</span></span>
<span><span class="co">#&gt;  6  2020 2_state  &lt;NA&gt;        &lt;NA&gt;   09    Connecticut  B25003_…   4.70e5   4548</span></span>
<span><span class="co">#&gt;  7  2020 3_county Connecticut &lt;NA&gt;   09009 New Haven C… B25003_…   3.33e5   1647</span></span>
<span><span class="co">#&gt;  8  2020 3_county Connecticut &lt;NA&gt;   09009 New Haven C… B25003_…   2.07e5   2123</span></span>
<span><span class="co">#&gt;  9  2020 3_county Connecticut &lt;NA&gt;   09009 New Haven C… B25003_…   1.26e5   2225</span></span>
<span><span class="co">#&gt; 10  2020 4_region Connecticut &lt;NA&gt;   &lt;NA&gt;  Greater New… B25003_…   1.76e5   1834</span></span>
<span><span class="co">#&gt; # … with 47 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">homeownership</span> <span class="op">&lt;-</span> <span class="va">tenure</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/label_acs.html">label_acs</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">camiller</span><span class="fu">::</span><span class="fu"><a href="https://camille-s.github.io/camiller/reference/calc_shares.html" class="external-link">calc_shares</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">label</span>, denom <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">label</span>, <span class="st">"Owner"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">level</span>, <span class="va">name</span>, <span class="va">share</span><span class="op">)</span></span>
<span></span>
<span><span class="va">homeownership</span></span>
<span><span class="co">#&gt; # A tibble: 19 × 3</span></span>
<span><span class="co">#&gt; # Groups:   level, name [19]</span></span>
<span><span class="co">#&gt;    level    name                 share</span></span>
<span><span class="co">#&gt;    &lt;fct&gt;    &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 1_us     United States        0.644</span></span>
<span><span class="co">#&gt;  2 2_state  Connecticut          0.661</span></span>
<span><span class="co">#&gt;  3 3_county New Haven County     0.621</span></span>
<span><span class="co">#&gt;  4 4_region Greater New Haven    0.596</span></span>
<span><span class="co">#&gt;  5 4_region New Haven Inner Ring 0.612</span></span>
<span><span class="co">#&gt;  6 4_region New Haven Outer Ring 0.793</span></span>
<span><span class="co">#&gt;  7 5_town   Bethany              0.917</span></span>
<span><span class="co">#&gt;  8 5_town   Branford             0.655</span></span>
<span><span class="co">#&gt;  9 5_town   East Haven           0.742</span></span>
<span><span class="co">#&gt; 10 5_town   Guilford             0.86 </span></span>
<span><span class="co">#&gt; 11 5_town   Hamden               0.637</span></span>
<span><span class="co">#&gt; 12 5_town   Madison              0.862</span></span>
<span><span class="co">#&gt; 13 5_town   Milford              0.745</span></span>
<span><span class="co">#&gt; 14 5_town   New Haven            0.28 </span></span>
<span><span class="co">#&gt; 15 5_town   North Branford       0.86 </span></span>
<span><span class="co">#&gt; 16 5_town   North Haven          0.826</span></span>
<span><span class="co">#&gt; 17 5_town   Orange               0.905</span></span>
<span><span class="co">#&gt; 18 5_town   West Haven           0.514</span></span>
<span><span class="co">#&gt; 19 5_town   Woodbridge           0.893</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/geo_level_plot.html">geo_level_plot</a></span><span class="op">(</span><span class="va">homeownership</span>, value <span class="op">=</span> <span class="va">share</span>, hilite <span class="op">=</span> <span class="st">"#EA7FA2"</span>, </span>
<span>               title <span class="op">=</span> <span class="st">"Homeownership in Greater New Haven, 2020"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-geo_plot-1.png" width="100%"></p>
<p>See more detail in the vignette: <code><a href="articles/basic-workflow.html">vignette("basic-workflow")</a></code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/CT-Data-Haven/cwi/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/CT-Data-Haven/cwi/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cwi</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Camille Seaberry <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
